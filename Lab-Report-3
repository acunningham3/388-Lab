\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[margin=1in]{geometry}
\usepackage{times}
\usepackage{setspace}
\usepackage{graphicx}

\linespread{1}
\setlength{\parindent}{0.5in}

\newcommand\tab[1][0.5in]{\hspace*{#1}}
\renewcommand*{\thefootnote}{\arabic{footnote}}

% Cover
\title{\vspace{-3cm}
    \begin{figure} [h!]
        \centering
        \includegraphics[height = 40, width = 200]{Logo.png}
    \end{figure} 
    \rule{\linewidth}{0.5mm} \\
    \huge {ECE 388: Embedded Design Project } \\ [18pt]
    \large Automated Greenhouse Management System \\
    \rule{\linewidth}{0.5mm} \\[0.25in]
    \date{}
}

\begin{document}
\clearpage\maketitle
\begin{center}
\Large We certify that this work is original and not a product of anyone’s work but our own \\ [1.25in]

\noindent\begin{tabular}{ll}
\centering
    \makebox[3in]{\hrulefill} & \makebox[3in]{\hrulefill}\\
    \large{Adam Cunningham (acunningham3)} & \large{James McCarthy (jimdog10)}\\[8ex]
\end{tabular}
\noindent\begin{tabular}{l}
    \makebox[3in]{\hrulefill}\\
    \large{Ryan McCarthy (rmccarthy3)}\\[20ex]
\end{tabular}

\date{\Large Submitted: October  2018 \\ \Large Due: October  2018} \\[1.25in]
\thispagestyle{empty}
\end{center} 

% Contents
\newpage\setcounter{page}{1} 
\tableofcontents
\listoffigures
\listoftables
\newpage

%Abstract
\renewcommand*\abstractname{\Large\textbf{Abstract}}
\begin{abstract}
\setlength{\parindent}{0.5in}
\linespread{1}\selectfont\normalsize\noindent
\tab The automated greenhouse plant management system is an embedded system utilized by consumers to ensure the well-being and development of all plants in a greenhouse without any  oversight or labor  required. There are many aspects to consider while creating this product, and it is important to layout its overall functions.
\tab A prototype is an early sample of a product built to test a concept or process or to act as a model to be replicated or learned from. The automated greenhouse has three separate  prototyping models that will be discussed in detail in this report.
\end{abstract}

% Introduction
\section{Introduction}
 Three different systems were designed for the purpose of prototyping: an irrigation system, a temperature and humidity sensing system with heating and cooling, and a light sensing system. The irrigation system makes use of a pump, a water source with a switch float, and a soil moisture sensor. After repeated testing of the pump, it was seen that at least 12 volts is needed to drive it's motor and successfully take in and put out water. The pump is intertwined with the float switch and the soil moisture sensor, as it should only be activated when the switch is closed, indicating that there is a sufficient amount of water in the source, and when the sensor indicates that moisture is low in the soil. A test plan was made for this system, and its outcome can be seen in the Experimental Results section of the report. The temperature and humidity sensing system with heating and cooling makes use of the DHT22, a fan, and a heater. When the program for the product is run, a serial monitor displays all temperature and relative humidity in the room, updating every two seconds. When the temperature rises above 82 degrees Fahrenheit or the humidity gets above 50 percent, a fan is activated, along with a red LED being turned on. When the temperature falls below 82 degrees Fahrenheit or the humidity falls below 50 percent, a blue LED is turned on and the heater is activated. A test plan with its outcome can again be found in the Experimental Results section. The final prototyping portion of the product is the light sensing system. A circuit was created with the photoresistor, an LED, and transistor. When the resistance in the photoresistor is less than 4 mega ohms, the LED is turned off. When the resistance in the photoresistor reaches above 43 mega ohms, the LED is turned on. This final test plan with its results can be seen in the Experimental Results section. 
 the Experimental Results section. 
%Methods
\section{Methods and Procedures}
\textbf{System 1 Under Test:} \\
This first system tests the usage of the DHT22. This small sensor easily outputs precise readings for the ambient temperature and humidity. Below is a small section of the Arduino code that controls this sensor. This code snippet stores the temperature and humidity readings from the DHT22 into variables f and h respectively.

\pagebreak

    \begin{figure} [h!]
        \centering
        \includegraphics[width = 190]{Inputs.png}
        \caption{Set variables h and f to the humidity and temperature}
    \end{figure} \\
    
\indent The main point of this system is to successfully control an LED, Blow Dryer, and Fan using the sensor. Since the final prototype will need to control a red LED to show the user that the greenhouse is too hot or humid. The prototype will also need to start a fan if the greenhouse becomes too hot and a blow dryer if the greenhouse becomes too cold. Below is a sample of code that shows an if statement that will control the power to the heater and fan.\\

    \begin{figure} [h!]
        \centering
        \includegraphics[width = 300]{Code-system-1.png}
        \caption{Code to control the LEDs, Heater, and Fan}
    \end{figure} \\

\indent The code takes in the reader from the DHT22 into the variables as defined before. The code will then detect if the temperature and humidity are over 75 degrees and 70 percent. If so then the program will drive the fan pin high and turn on the fan. If the temperature is below 55 degrees and the humidity is below 30 percent then the code will drive the heater pin high and turn on the heater. If any other reading is found then the program will drive every pin low.\\

\noindent{\textbf{System 1 Test Setup:}
The system was built using these components:}
\begin{itemize}
    \item DHT22
    \item Arduino Micro-controller
    \item RGB LED
    \item Fan
    \item Blow Dryer
    \item 3x 220 Ohm Resistors
    \item 10k Ohm Resistor
\end{itemize} \\

\noindent\textbf{System 1 Test Procedure:} \\
This next image shows the wiring diagram for this system.\\

    \begin{figure} [h!]
        \centering
        \includegraphics[height = 150, width = 350]{System-1.png}
        \caption{Wiring diagram for system 1}
    \end{figure} \\
    
\indent As seen, the data output from the DHT22 goes into Pin 2 on the Arduino. This data is read as the inputs f and h for temperature and humidity. Depending on the resulting inputs, the Arduino will drive the several pins connected to the RGB LED high. Although, these pins have the ability to output specific voltages from the user. This can grant the user access to millions of different color combinations to choose from. For now, the code will only output a HIGH or LOW signal to the pins.\\
\indent This wiring diagram also shows a fan and a blow dryer that are attached to the Arduino. This fan is activated whenever the temperature readings become higher than 75 degrees. The blow dryer is activated whenever the temperature becomes lower than 55 degrees.\\

    \begin{figure} [h!]
        \centering
        \includegraphics[width = 200]{System-1-Monitor.png}
        \caption{DHT22 serial monitor output}
    \end{figure} \\
    
\indent Above is the serial monitor outputs for this system. This monitor shows the exact values that the DHT22 is producing. This eases the debugging of the system significantly, as the students can check to see if the code is working in response to different humidity and temperatures.\\

\noindent\textbf{System 2 Under Test:}\\
The second system under test was constructed in order create a circuit that would turn on the LED when the photoresistor resistor reaches 45 Mega-Ohms. The photoresistor will be used to monitor the amount of sunlight inside of the green house. When light is present, the resistor has a lower resistance, about 3 Mega-Ohms, and as the light decreases, the resistance increases to about 45 Mega-Ohms. The the voltage will change as a result of the resistance increasing or decreasing  due to Ohms's Law and the micro-controller will monitor these changes and enable LEDS when there isn't enough sunlight present. The following test was orchestrated in order to ensure that the LED turned on when there wasn't enough light present. (See appendix for pictures of the test conducted)\\

\noindent{\textbf{System 2 Test Setup: }} The photoresistor was tested using the following components:

\begin{itemize}
    \item Photoresistor
    \item 5 V power supply (from Arduino Uno R3 micro-controller)
    \item LED (light emitting diode)
    \item 2 Wires
    \item 10k Ohm resistor
    \item NPN Transistor (PN2222)
\end{itemize}

\noindent\textbf{System 2 Test Procedure:}\\
The test was performed by first connecting 5 volts from the Arduino Uno to the 10k Ohm resistor. Next, the 10k Ohm resistor was connected to the collector and to the base of the transistor.  The photoresistor was also connected to the base of the transistor and to the negative terminal of the LED. The positive terminal of the LED was connected to the emitter and the 5 volt source, the photresistor and the LED were all grounded. \\

    \begin{figure} [h!]
        \centering
        \includegraphics[height = 100, width = 200]{dark-led.jpg}
        \includegraphics[height = 100, width = 200]{light-led.jpg}
        \caption{Photoresistor is Not Covered}
        \caption{Photoresistor is Covered}
    \end{figure} 
    
\noindent{\textbf{System 3 Test Setup:} \\
This next testing session tests the reliability and integrity of the supplied humidity and temperature sensor. The given sensor, or the DHT22, has the ability to detect the percentage of humidity and the temperature of the air around it. This test is to ensure that the implementation created in the Arduino IDE works correctly and creates logically outputs. As well as to test the functionality of the device.\\

\noindent{\textbf{System 3 Test Setup:}
The DHT22 was tested using the following components:}
\begin{itemize}
    \item Humidity and Temperature Sensor (DHT22)
    \item Arduino Uno R3 Micro-Controller
    \item 10k Ohm Resistor
\end{itemize}

\noindent\textbf{System 3 Test Procedure:} \\
The DHT22 was thoroughly tested using a breadboard and an Arduino UNO R3 to provide 5 volts to in the VCC pin. The second PWM pin is connected to the data line of the DHT22. Ground is connected to ground. A pinout for the DHT22 can be found in the Appendix. Below is the a section of the code implementation for the testing. 


This code loads the incoming humidity and temperature readings to two different variables, h and f. The code iterates this loop every 1 second for a reliable output of readings. The output monitor for this section can be found in the Laboratory Experimental Results.
}

% Laboratory experimental results
\section{Experimental Results}


\begin{figure} [h!]
        \centering
        \includegraphics[width = 400]{LilPump.PNG}
        \caption{Test Plan for Water Pump with Results}
    \end{figure} \\
    \pagebreak 
    
\begin{figure} [h!]
        \centering
        \includegraphics[width = 350]{Temp.PNG}
        \caption{Temperature and Humidity System Test Plan With Results}
    \end{figure} \\
    \pagebreak
    \begin{figure} [h!]
        \centering
        \includegraphics[width = 350]{Light.PNG}
        \caption{Test Plan for Light Sensing System with Results}
    \end{figure} \\
    
    \begin{table} [h!]
    \centering
    \begin{tabular}{||c c c||} 
    \hline
    Group Member & System Completed & Successful vs Failed \\ [0.5ex] 
    \hline\hline
    Ryan & Light Sensor & Successful  \\ 
    \hline
    Adam & Irrigation System & Successful  \\
    \hline
    James & Temperature and Humidity System & Successful  \\
    \hline
    \end{tabular}
\caption{PARTITIONED WORK}
\label{table:1}
\end{table}
\pagebreak

% Discussion
\section{Discussion} Thus far in the lab, three separate prototyping systems have been created: an irrigation system, a temperature and humidity sensing system with heating and cooling, and a light sensing system. For the first test, when 5 volts was put into the pump, the motor was unable to properly function. This lead to the conclusion that more voltage must be needed, so it was tested again with 9 volts. This was still an insufficient amount of voltage for the pump, and it still did not work. For the next test, 12 volts was used with the use of a bipolar transistor. The motor began to function, and slight water was pumped out. When the same voltage was applied with the transistor taken out, the motor was louder and the water being pumped out increased to a more defined stream. After connecting the float switch to the pump, it was concluded that the pump only functioned when the float switch was closed, which is a good sign as that indicates that there is enough water in the source. Finally, when the soil moisture sensor was connected to the float switch and the pump, the pump was unable to properly pump out water when the sensor indicated low soil moisture. This will require further testing and circuit rewiring before it is completely finished. For the temperature and humidity sensing system with heating and cooling, all tests conducted passed without issues. When the program was run, the serial monitor successfully displayed the temperature and humidity level in the greenhouse, updating every 2 seconds. Also, when the program was run, if the humidity reached above 50 percent, or the temperature rose higher than 82, the microcontroller outputs 5 volts to turn on the red LED. When the program was run, if the temperature dropped below 82 degrees, a blue LED was turned on with use of 5 volts sent from the microcontroller. as well. After a fan was attatched to the circuit, if the red LED is turned on, the fan is also turned on with use of 5 volts being sent from the microcontroller. This is because if the red LED is on, the temperature must be too high and the plants need to be cooled. Next, when a heater (hairdryer) was connected to the circuit, if the blue LED was turned on, the heater was also activated. This is because if the blue LED is on, the temperature is too cold and the plants need to be warmed up. Finally, for the light sensing system, when the photoresistor has a resistance below 4 mega ohms across its terminals, and LED is turned off, since it is indicating that there is enough light in the greenhouse for the plants. When the photoresistor has a resistance of 43 mega ohms and above, however, the LED is turned on, since there when the resistance is at this value or higher it indicates that there is not enough light for the plants in the greenhouse and an artificial light source is needed. After completing all these test plans, the present goal for the product completion is clear: get the soil moisture sensor to work with the pump and float switch, and get all three prototyping systems to work together. 


% Conclusion
\section{Conclusion}
This lab report reports the prototyping that this group of students have completed thus far in the semester. Three systems have been composed, designed, and executed successfully. These systems will then be combined to a completed, working prototype. As the students now know that all the components work and that the executed systems work, designing and implementation a final prototype will be as easy as combining the three systems and the code along with those systems.

% Laboratory reflection
\section{Laboratory reflection}
The main problems that any of us had with this lab was powering the water pump. Unfortunately, the water pump does not function at all without the use of a 12 volt input. The Arduino board that we are using only outputs up to 5 volts on the VCC pins. We needed a 12 volt power adapter to plug into the Arduino board so we could use the VIN pin to output the correct voltage and run the pump. As shown by our testing results in the laboratory reflection.
We have to try more test and different circuit setups in order to incorporate the soil moisture sensor with the pump aand flaotswitch. This is essential, as the pump should only be active when the soil is lacking moisture.

% References 
\section{References}
[1] “VH400 Soil Moisture Sensor Probes,” Vegetronix. [Online]. Available:\\ https://www.vegetronix.com/Products/VH400/. [Accessed: 06-Oct-2018].

\newpage

% Appendices
\section{Appendix}

\begin{figure} [h!]
    \centering
    \includegraphics[width = 300]{System-3-Pic.jpg}
    \caption{System 3 Physical Wiring}
\end{figure} \\

\begin{figure} [h!]
    \centering
    \includegraphics[width = 300]{System-1-Pic1.jpg}
    \caption{System 1 Physical Wiring - Fan On (Red LED)}
\end{figure} \\

\begin{figure} [h!]
    \centering
    \includegraphics[width = 300]{System-1-Pic2.jpg}
    \caption{System 3 Physical Wiring - Fan Off (Green LED)}
\end{figure} \\

\end{document}
